<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:viewModels="clr-namespace:TbspRpgStudio.ViewModels"
             mc:Ignorable="d" d:DesignWidth="800" d:DesignHeight="450"
             x:Class="TbspRpgStudio.Views.ScriptEditView"
             x:DataType="viewModels:ScriptEditViewModel">
    
    <DockPanel Margin="10">
        <StackPanel DockPanel.Dock="Bottom">
            <Separator />
            <Grid ColumnDefinitions="*, *">
                <Button Grid.Column="0" Command="{Binding CloseEditCommand}">Close</Button>
                <StackPanel Orientation="Horizontal" Grid.Column="1" HorizontalAlignment="Right">
                    <Button Name="SaveCloseButton" Command="{Binding SaveCloseCommand}">Save and Close</Button>    
                    <Button Name="SaveButton" Margin="10, 0, 0, 0" Command="{Binding SaveCommand}">Save</Button>
                </StackPanel>
            </Grid>
        </StackPanel>
        
        <Grid RowDefinitions="Auto, *">
            <TabStrip Grid.Row="0" ItemsSource="{Binding Scripts}"
                      SelectedItem="{Binding SelectedScript}">
                <TabStrip.ItemTemplate>
                    <DataTemplate x:DataType="viewModels:ScriptViewModel">
                        <TextBlock Text="{Binding Header}" FontSize="16"/>
                    </DataTemplate>
                </TabStrip.ItemTemplate>
            </TabStrip>
            
            <!-- Tab Content -->
            <ContentControl Grid.Row="1" Content="{Binding SelectedScript}" Margin="0, 10">
                <ContentControl.ContentTemplate>
                    <DataTemplate x:DataType="viewModels:ScriptViewModel">
                        <ContentControl Content="{Binding ViewModel}"/>
                    </DataTemplate>
                </ContentControl.ContentTemplate>
            </ContentControl>
        </Grid>
    </DockPanel>
    
</UserControl>